je_uzb_silicon_and_silk_road = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"
	group = je_group_objectives

	is_shown_in_lobby = { c:UZB ?= THIS }
	is_shown_when_inactive = { c:UZB ?= THIS }

	invalid = { NOT = { c:UZB ?= THIS } }


	complete = {
		# Silk plantations in Samarqand (historic Silk Road hub)
		custom_tooltip = {
			text = uzb_je_silicon_and_silk_road_tt_silk
			any_scope_building = {
				is_building_type = building_silk_plantation
				level >= 8
				state = { state_region = s:STATE_SAMARQAND }
			}
		}
	
		# Textile mills (processing silk and cotton into textiles)
		custom_tooltip = {
			text = uzb_je_silicon_and_silk_road_tt_textile
			any_scope_building = {
				is_building_type = building_textile_mill
				level >= 10
				state = { OR = { state_region = s:STATE_SAMARQAND state_region = s:STATE_BUKHARA } }
			}
		}
	
		# Trade centers (revitalizing Silk Road commerce)
		custom_tooltip = {
			text = uzb_je_silicon_and_silk_road_tt_trade
			any_scope_building = {
				is_building_type = building_trade_center
				level >= 5
				state = { state_region = s:STATE_SAMARQAND }
			}
		}
	
		# GDP requirement
		custom_tooltip = {
			text = uzb_je_silicon_and_silk_road_tt_gdp
			gdp >= 10000000
		}
	}
	

	is_progressing = {
		OR = {
			any_scope_building = {
				is_building_type = building_silk_plantation
				is_under_construction = yes
				state = { state_region = s:STATE_SAMARQAND }
			}
			any_scope_building = {
				is_building_type = building_textile_mill
				is_under_construction = yes
				state = { OR = { state_region = s:STATE_SAMARQAND state_region = s:STATE_BUKHARA } }
			}
			any_scope_building = {
				is_building_type = building_trade_center
				is_under_construction = yes
				state = { state_region = s:STATE_SAMARQAND }
			}
			gdp >= 2500000
		}
	}
	

	on_monthly_pulse = {
		effect = {
			# Check silk plantation progress in Samarqand
			if = {
				limit = {
					any_scope_building = {
						is_building_type = building_silk_plantation
						state = { state_region = s:STATE_SAMARQAND }
						level >= 8
					}
					NOT = { has_variable = uzb_silk_milestone }
				}
				set_variable = uzb_silk_milestone
				trigger_event = { id = uzb_silk_road_silk_progress }
			}
		
			# Check textile mill progress
			if = {
				limit = {
					any_scope_building = {
						is_building_type = building_textile_mill
						state = { OR = { state_region = s:STATE_SAMARQAND state_region = s:STATE_BUKHARA } }
						level >= 10
					}
					NOT = { has_variable = uzb_textile_milestone }
				}
				set_variable = uzb_textile_milestone
				trigger_event = { id = uzb_silk_road_textile_progress }
			}
		
			# Check trade center progress
			if = {
				limit = {
					any_scope_building = {
						is_building_type = building_trade_center
						state = { state_region = s:STATE_SAMARQAND }
						level >= 5
					}
					NOT = { has_variable = uzb_trade_milestone }
				}
				set_variable = uzb_trade_milestone
				trigger_event = { id = uzb_silk_road_trade_progress }
			}
		}
	}
	
	on_complete = {
		hidden_effect = {
			trigger_event = { id = uzb_silk_road_complete }
		}
	}

	}
