{{Version|1.10}}{{expand|with=more details of data functions and other localization documentation}}
Localization files must be <code>.yml</code> format encoded in UTF-8-BOM. Otherwise, the game simply ignores the file. Further, the filename must end with <code>_l_<language></code>; any file name can be used as long as this format is respected. For example: <code>MODNAME_USAGE_decisions_l_english.yml</code>.

The localization files are processed in reverse alphabetical order (from Z to A), adding <code>a</code> or <code>0</code> at the beginning of your localization file will make sure it applied last. When replacing vanilla localization, a better practice is to use a folder <code>replace</code> as in <code>/english/replace/overwriting_l_english.yml</code>. Files within a replace folder work slightly differently as the localization keys within are checked specifically and overwrite any other identical localization keys.

Note that unlike some previous Paradox Development Studio games, the game folders for displayed text are named "Localization" with a "z" rather than "Localisation" with an "s".

<section begin="warning"/>{{color|#f00|'''NOTE:''' All text presented to the player '''''must''''' be done through localization keys.|bold=normal}}<section end="warning"/> Any "localized" text used in script types is actually just an unlocalized key that is presented verbatim. In certain script types â€“ such as events, this can work, but other script types will show errors or not work as expected.

== Languages ==
Each supported language has an internal name which used as the name of the subfolder for the language. The internal name, with prefix <code>l_</code> (i.e. a lowercase L), is also used for the name format of the YAML files and as language identifier in the first line of the YAML file as well.
{| class="mildtable sortable plainlist"
! Language !! internal name
|-
| English || english
|-
| Brazilian Portuguese || braz_por
|-
| French || french
|-
| German || german
|-
| Polish || polish
|-
| Russian || russian
|-
| Spanish || spanish
|-
| Japanese || japanese
|-
| Simplified Chinese || simp_chinese
|-
| Korean || korean
|-
| Turkish || turkish
|}

== Basic example ==
Localization allows a game object to be rendered with different text depending on certain conditions, typically the user's selected language. In Victoria 3, localization connects a localization ''key'', which is typically a defined script term such as a country's TAG or the script name of an event, journal entry, or diplomatic action, with a defined text string.

Many localization keys have related keys that are generated by the game's engine. For example, TAG_ADJ for a country, or journal_entry_reason for the descriptive text of a journal entry. Refer to the game's info files or other modding articles on this wiki to determine such keys.

Each localization entry should appear as follows: <syntaxhighlight lang="YAML"> key: "Localized text"</syntaxhighlight>
Descriptively: each entry is a single line, starting with a single space, the exact localization key, a colon, then another space, and the localized string contained within double quotes. A number can follow the colon, to keep track of revisions, but is not required.

A complete, though short localization file looks like this:
<syntaxhighlight lang="YAML">
l_<lang>:
 key: "Localized text"
</syntaxhighlight>
Comments can be added with <code>#</code> outside quotation marks, on their own line or following a localization entry.
=== Localization reuse ===
Localization keys can be used within each other by added <code>$key$</code> to the localized string.

For example:<syntaxhighlight lang="YAML">
key1: "example"
key2: "This is an $key1$"
</syntaxhighlight>

Key2 would appear in game as "This is an example". Reusing localization keys this way is a good way to cut down on required changes in related keys.

== Formatting ==
Similar to other Paradox games, Victoria 3 has various methods for applying custom formatting to localization. All custom formatting begins with a <code>#</code> followed by the formatting key to begin the formatting. A space is needed after the formatting key to the actual text, but this space will not be represented in the actual text. Finally, to end formatting, a <code>#!</code> is necessary. No space should be used before the <code>#!</code>, however. Custom formatting can be nested, with each new formatting key requiring its own <code>#!</code> in order to end the formatting. Alternatively, custom formatting can be joined with a semi-colon.

=== Colouring characters ===
{{Hatnote|See {{Template|Color}} for using these game text colors on the wiki}}
An example of colouring some text to red can be seen below:
<syntaxhighlight lang="YAML">
my_loc: "This #R text#! is red!"
</syntaxhighlight>
[[File:Vic3 wiki redtext showcase.png|frameless]]

The following formatting keys are implemented in the base game to colorize characters:
{| class="wikitable"
|+
! Key !! Notes !! Colour
|-
| #! || Ends the current formatting rule. || None
|-
| #r || || style="color:rgb(88% 34% 34%);" | Red 
|-
| #green || || style="color:rgb(39% 67% 33%);" | Green
|-
| #light_green || || style="color:rgb(25% 57% 45%);" | Light Green
|-
| #blue || also #U || style="color:rgb(41% 67% 74%);" | Blue
|-
| #white || || style="background:black; color:rgb(94% 95% 88%);" | White
|-
| #darker_white || also #default_text || style="background:black; color:rgb(76% 74% 72%);" | Darker White
|-
| #yellow || || style="background:black; color:rgb(100% 97% 66%);" | Yellow
|-
| #gold || also #O Same color as concepts. || style="color:rgb(100% 67.4% 45.4%);" | Gold
|-
| #black || || style="color:rgb(0% 0% 0% / 60%);" | Black
|-
| #gray || Also #lore || style="color:#B0B0B0" | Gray
|}

=== Other custom formatting ===
In Victoria 3, it is possible to apply other forms of formatting to localization, including bolding and italicizing text. Other forms of formatting to text are similar to colourizing text in that it is necessary to begin the formatting rule with a # and end it with a #!.
{| class="wikitable"
|+
! Key !! Effect !! Example
|-
| #! || Ends the current formatting rule. ||
|-
| #b || Bolds text. || [[File:Vic3 wiki bold text showcase.png]]
|-
| #italic || Italicizes text. || [[File:Vic3 wiki italic text showcase.png|frameless]]
|-
| #lore || Lightens text. || [[File:Vic3 wiki lore text showcase.png|frameless]]
|-
| #shadow || Adds drop shadow to text || 
|-
| #l/#L || Underlines text ||
|}

=== Text icons ===
[[File:Text icon showcase.png|thumb|An example of text icons in a localization, using the script: <syntaxhighlight lang="YAML">my_loc: "I love people who wear @capitalists! hats!"</syntaxhighlight>]]
It is possible to add icons into localization strings. Base game text icons are defined in the file {{path|gui/texticons.gui}}, and new icons can be added to any .gui file in {{path|custom=1|<mod>/gui}} for mod use.

All text icons start with <code>@</code> followed by the icon's key and <code>!</code> following the key. This has been included in the table below for simplicity.

Note: This is a not a complete list. These are just a few examples of icons.
{| class="wikitable"
|+
! Key !! Icon
|-
| @information! || [[File:Information.png|24px|link=]]
|-
| @warning! || [[File:Warning.png|24px|link=]]
|-
| @money! || [[File:Hud money.png|24px|link=]]
|-
| @censored! || style="background:black" |
|-
| @green_checkmark! || [[File:Yes.png|24px|link=]]
|-
| @red_cross! || [[File:No.png|24px|link=]]
|-
| @construction! || [[File:State status construction.png|24px|link=]]
|-
| @bur! || [[File:Hud bureaucracy.png|24px|link=]]
|-
| @aut! || [[File:Hud authority.png|24px|link=]]
|-
| @inf! || [[File:Hud influence.png|24px|link=]]
|-
| @innovation! || [[File:Innovation.png|24px|link=]]
|-
| @officers! || [[File:Pop officers.png|24px|link=]]
|-
| @capitalists! || [[File:Pop capitalists.png|24px|link=]]
|-
| @clergymen! || [[File:Pop clergymen.png|24px|link=]]
|-
| @engineers! || [[File:Pop engineers.png|24px|link=]]
|-
| @devout! || [[File:IG devout.png|24px|link=]]
|}

== Data functions ==
{{Main|GUI script}}
Data functions allow for dynamic text to be included in a localization string. Functions are always enclosed in square brackets. Some functions are used alone, while many others can be "dot chained" by combining them with periods. Typically, chained functions are used to shift scopes first then get some localized information from the final scope. Data functions which output a string can also be considered localization functions.

The following are some examples of data functions, many of them start with "Get" and are always written in "UpperCamelCase" or "PascalCase" (e.g. "GetName")
{| class="wikitable"
|+ Example data functions
! Function name !! Description
|-
| GetName || Returns the name as a tooltipped string<br>For countries, also returns the flag
|-
| GetNameNoFlag || Returns a country's name as a tooltipped string without the flag
|-
| GetAdjective || Returns a country's adjective as tooltipped string
|-
| GetAdjectiveNoFormatting || Returns a country's adjective as a plain string
|-
| GetPrimaryRoleTitle || Returns a character's primary role as a tooltipped string
|}
Many functions require an input argument, such as a type key, variable or saved scope name. These functions use parentheses to enclose the input, with game script objects in single quotes and other data functions without. If multiple input arguments are required, each is separated by a comma.
{| class="wikitable"
|+ Example data functions with input
! Function name !! Description
|-
| GetGoods(' ') || Returns the input goods as an object for further functions
|-
| ScriptValue(' ') || Returns the calculated value of the input named script value
|-
| GetCurrentBarValue( ) || Returns the value of a progress bar, typically used with <code>ScriptedProgressBar.Self</code>
|}
=== Function formatting ===
Localization functions can be formatted in the same way as regular localization strings, but they also have special formatting. Function formatting is indicated with a vertical pipe <code>|</code> just before the closing square bracket. All formatting modifiers are put between the pipe and square bracket, and many can be used together.
{| class="wikitable"
! Format code !! Function !! Incompatible with
|-
| <code>*</code> || Converts values into K, M, or B format at thresholds of 1&thinsp;000, 1&thinsp;000&thinsp;000, and 1&thinsp;000&thinsp;000&thinsp;000 || <code>K</code>
|-
| <code>K</code> || Converts values into K format, fixed 2 decimal places || Overrides <code>*</code> and decimal count
|-
| <code>=</code> || Adds "+" to positive values and "-" to negative values ||
|-
| <code>+</code> || Colors positive values {{color|green|green|bold=normal}} and negative values {{color|red|red|bold=normal}} || <code>- : ;</code> Last defined is used
|-
| <code>-</code> || Colors positive values {{color|red|red|bold=normal}} and negative values {{color|green|green|bold=normal}} || <code>+ : ;</code> Last defined is used
|-
| <code>:</code> || Colors positive values {{color|gold|gold|bold=normal}} and negative values {{color|blue|blue|bold=normal}} || <code>- + ;</code> Last defined is used
|-
| <code>;</code> || Colors positive values {{color|blue|blue|bold=normal}} and negative values {{color|gold|gold|bold=normal}} || <code>- + :</code> Last defined is used
|-
| <code>U</code> || First letter is made uppercase || Overwrites <code>l</code>
|-
| <code>l</code> || First letter is made lowercase || <code>U</code>
|-
| <code>L</code> || Underlines text ||
|-
| <code>%</code> || Converts value to percent (multiply by 100, add percent sign), if used with <code>*</code> or <code>K</code>, does not multiply ||
|-
| <code>1-5</code> || Determines how many decimal places are shown, max 3 with <code>*</code> || <code>K</code>
|}

== Concepts ==
Concepts are built-in info guides, which provide the player info through a tooltip that explains the concept. Concept text is {{color|orange|orange|bold=normal}} by default, but any other formatting applies to the concept text. Concepts are defined in {{path|common/game_concepts}}. Concepts can be given a custom icon or use a default icon {{icon|v3}}. Each defined concept then must be localized itself as normal.

To add a concept tooltip to a localization string, use <code>[<concept_name>]</code>. Below is an example of concept added to another localization string:
<syntaxhighlight lang="YAML">
my_loc: "We have no [concept_legitimacy]!"
</syntaxhighlight>
[[File:Vic3 wiki preset concept showcase.png|frameless|upright=1.5]]

=== Alternate concept text ===
Concepts can also be used with alternate text, either another localization string or an ad-hoc localization string. Alternate concept text is often used by the Victoria 3 developers to make concept text plural or for a different verb form, or to create concept text for anything that does not have a concept.

Below is an example of a alternate concept text that shows the construction concept after hovering over it. This links the construction concept with the text "State Construction Efficiency" rather than just the text "Construction". Note that this is an example of a ''localization function'' with parameters, which can be noted by the parentheses. In this case, the function searches for the concept with the script name given as the first parameter, and localizes that concept with the item given as the second parameter.
<syntaxhighlight lang="YAML">my_loc: "It is unfortunate, but we do not have any [Concept('concept_construction', 'State Construction Efficiency')]"</syntaxhighlight>
[[File:Vic3 wiki custom concept showcase.png|frameless|upright=1.5]]

== Custom tooltips ==
Localization strings can be defined with custom tooltips as part of the string. To do so the localization string should contain one of the following:
* <code>#tooltippable;tooltip:<tooltip_loc_key> <tooltip_text>#!</code>
* <code>#tooltippable #tooltip:<tooltip_loc_key> <tooltip_text>#!#!</code>
This creates a tooltip where the main localization string shows <tooltip_text> in {{color|yellow|yellow|1|bold=normal}}, but if that is hovered over, a tooltip shows <tooltip_loc_key>

== Saved scopes ==
Similar to other Paradox games, Victoria 3 allows for saving game objects for later use. With localization, these saved scopes can be used with localization functions such as "GetName" or "GetHerHis". Depending on the type of saved scope, different functions may or may not be valid and may output different results. For example, "GetName" used with a country displays that country's current flag in addition the name, while with a character or interest group it simply shows the name.

Saved scopes can be included in localization through a localization function. These always start with <code>[SCOPE</code>, followed by the particular type of scope, and any following functions such as "GetName". In each case, the functions are separated/chained by periods.

Saving a scope is an effect that can be done in most places that effects are valid. Saved scopes can be used for a variety of purposes, including localization. Note however, using a saved scope for localization has some restrictions on timing; typically, the scope must be saved either in an <code>immediate</code> block, or in an earlier event or related content object. How long the saved scope persists depends on its use. For example, with journal entries, the saved scope lasts as long as the entry is active.

=== Country as saved scope ===
For this example, the United States of America is saved as an arbitrarily named scope, using the following script:
<pre>
immediate = {
	c:USA = {
		save_scope_as = usa_nation_scope
	}
}
</pre>
Now that the scope for the United States has been saved, it is now possible to use the saved script name in localization functions. This is shown below.<syntaxhighlight lang="YAML">my_je_reason: "The [SCOPE.sCountry('usa_nation_scope').GetName] is a country in the Western Hemisphere."</syntaxhighlight>[[File:Vic3 wiki usa je showcase.png|frameless]]

For saved country scopes, the function <code>sCountry('scope_name')</code> is used. This is followed by the desired localization functions, such as "GetName" or "GetAdjective"

Some examples of functions using the saved scope usa_nation_scope:
{| class="wikitable"
|+
! Example script !! Effect
|-
| [SCOPE.sCountry('usa_nation_scope').GetName] || Gets country name.
|-
| [SCOPE.sCountry('usa_nation_scope').GetNameNoFormatting] || Gets country name without formatting.
|-
| [SCOPE.sCountry('usa_nation_scope').GetNameNoFlag] || Gets country name without flag.
|-
| [SCOPE.sCountry('usa_nation_scope').GetAdjective] || Gets country adjective (in this case American).
|-
| [SCOPE.sCountry('usa_nation_scope').GetAdjectiveNoFormatting] || Gets country adjective (in this case American) without formatting.
|}

=== Character as saved scope===
For this example, the ruler of a country is saved as an arbitrarily named scope, using the following script:<pre>
immediate = {
	ruler = {
		save_scope_as = pru_leader
	}
}
</pre>Now that the character has been saved as a scope, it is now possible to use the saved script name in localization functions.<syntaxhighlight lang="YAML">mymod_pru_events.1.f: "Our leader, [SCOPE.sCharacter('pru_leader').GetFullName] has informed us of our magnificence."</syntaxhighlight>
For saved character scopes, the function <code>scharacter('scope_name')</code> is used. Again, followed by the desired localization functions, such as "GetName" or "GetAdjective"

Similarly to country scopes, there are several functions that can be used. Examples of this script is shown below using the pru_leader example.
{| class="wikitable"
|+
! Example script !! Effect
|-
| [SCOPE.sCharacter('pru_leader').GetFullName] || Gets a character's full name.
|-
| [SCOPE.sCharacter('pru_leader').GetFullNameNoFormatting] || Gets a character's full name without formatting.
|-
| [SCOPE.sCharacter('pru_leader').GetFirstName] || Gets a character's first name.
|-
| [SCOPE.sCharacter('pru_leader').GetFirstNameNoFormatting] || Gets a character's first name without formatting.
|-
| [SCOPE.sCharacter('pru_leader').GetLastName] || Gets a character's last name.
|-
| [SCOPE.sCharacter('pru_leader').GetLastNameNoFormatting] || Gets a character's last name without formatting.
|-
| [SCOPE.sCharacter('pru_leader').GetSheHe] || Gets 'she' if a character is female, or 'he' if a character is male.
|-
| [SCOPE.sCharacter('pru_leader').GetHerHis] || Gets 'her' if a character is female, or 'his' if a character is male.
|-
| [SCOPE.sCharacter('pru_leader').GetHerselfHimself] || Gets 'herself' if a character is female, or 'himself' if a character is male.
|}

== Customizable Localization ==
Unlike other Paradox games, custom localization can only be called with the data function GetCustom('custom_localization_name') in local scope or [Localize('custom_localization_name')] in global scope. These both refer to a scripted function in {{path|common/customizable_localization}}.

Each custom localization has its script name which is referred to with the function, then a type and a list of triggered or randomly selected localization keys. The type determines what scope is used for its triggers, and random_valid determines whether the first valid key or a random valid key is chosen. By default, the first valid key is used.

===Example===

This is an example of how to create a Customizable Localization file. It should go in the <code>/common/customizable_localization</code> folder.

<syntaxhighlight lang="coffeescript">
ruler_residence = {
	type = country # The scope that the localization applies to. Examples include 'country', 'character' or 'building'
	random_valid = yes # Optional. If no, will pick the first valid option
	
	text = {
		trigger = { # The conditions that must be met for the key to be valid. The scope is the same as the localization, in this case, a country.
			has_law = law_type:law_monarchy
		}
		localization_key = custom_royal_palace
	}

	text = {
		trigger = {
			has_law = law_type:law_presidential_republic
		}
		localization_key = custom_presidential_palace
	}

	text = {
		trigger = {
			any_scope_state = {
				is_coastal = yes
			}
		}
		localization_key = custom_seaside_palace
	}

	text = {
		trigger = {
			always = no
		}
		fallback = yes # Optional. If fallback is enabled, this option will be picked when there are no other valid options, even if the trigger isn't met.
		localization_key = custom_palace
	}
}
</syntaxhighlight>

To be used, the keys must be defined in a localization file.

<syntaxhighlight lang="yaml">
l_english:
 custom_royal_palace: "royal palace"
 custom_presidential_palace: "presidential palace"
 custom_seaside_palace: "seaside palace"
 custom_palace: "palace"
</syntaxhighlight>
===Usage===

To use a custom localization, the <code>GetCustom()</code> function must be called in the localization file. Here's how the example custom localization could be used in an event's description:
<syntaxhighlight lang="yaml">
l_english:
 ruler_killed_event.1.t: "Ruler Killed"
 ruler_killer_event.1.d: "Our ruler was killed yesterday, while at the [ROOT.GetCountry.GetCustom('ruler_residence')]."
</syntaxhighlight>
Depending on the conditions, the code in brackets would be replaced by a randomly selected localization. For instance, if the country is a monarchy and doesn't have any coastal states, it will be replaced by "royal palace". If it's a presidential republic and has coastal states, it will be randomly selected between "presidential palace" or "seaside palace". And if it's neither a monarchy, a presidential republic, nor has any coastal states, it will use the generic fallback "palace".

=== Supported types ===
Custom localizations can use any of the following types:
{{MultiColumn|
*Battle
*Building
*BuildingType
*CanalType
*Character
*CivilWar
*CombatUnit
*CommanderOrder
*CommanderOrderType
*Country
*CountryCreation
*CountryDefinition
*CountryFormation
*Culture
*Decree
*DiplomaticAction
*DiplomaticPact
*DiplomaticPlay
*DiplomaticRelations
*Front
*Hq
*Ideology
*Institution
*InstitutionType
*Interest
*InterestGroup
*InterestGroupTrait
*JournalEntry
*Law
*LawType
*Market
*MarketGoods
*Objective
*Party
*PoliticalMovement
*Pop
*PopType
*Province
*Religion
*ShippingLane
*State
*StateRegion
*StateTrait
*StrategicRegion
*Technology
*Theater
*TradeRoute
*War|5}}

== References ==
<references/>
{{Modding navbox}}
[[Category:Modding]]
